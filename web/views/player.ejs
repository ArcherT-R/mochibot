<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mochi Bar Database - <%= player.username %></title>
<style>
    body { font-family: Arial, sans-serif; background: #f0f0f0; margin:0; padding:0; }
    header { background: #6cb4ee; padding: 20px; text-align:center; font-size:24px; font-weight:bold; }
    .container { max-width: 1200px; margin:auto; padding:20px; display:flex; gap:20px; flex-wrap: wrap; }
    .column { background:white; padding:15px; border-radius:8px; flex:1; min-width:250px; box-sizing:border-box; }
    .column h3 { margin-top:0; border-bottom:2px solid #000; padding-bottom:5px; }
    .avatar { width:150px; height:150px; border-radius:50%; margin-bottom:10px; max-width:100%; }
    .box, .session-box { background:#e9e9e9; padding:10px; border-radius:6px; margin-bottom:10px; word-wrap: break-word; }
    .session-container { max-height: 300px; overflow-y:auto; }
</style>
</head>
<body>

<header>Mochi Bar - <%= player.username %></header>

<div class="container">

  <!-- Profile -->
  <div class="column">
    <img src="<%= player.avatar_url %>" alt="Avatar" class="avatar">
    <div class="box"><strong>Username:</strong> <%= player.username %></div>
    <div class="box"><strong>Group Rank:</strong> <%= player.group_rank %></div>
    <div class="box"><strong>Notes:</strong> ...</div>
  </div>

  <!-- Sessions -->
  <div class="column">
    <h3>Sessions</h3>

    <% if (activity.ongoingSession) { %>
      <div class="box">
        <strong>ðŸŸ¢ Ongoing Session</strong><br>
        <%= activity.ongoingSession %>
      </div>
    <% } %>

    <div class="session-container">
      <% if (activity.pastSessions && activity.pastSessions.length > 0) { %>
        <% activity.pastSessions.forEach(session => { %>
          <div class="session-box">
            <strong><%= session.name %></strong><br>
            <%= session.details %>
          </div>
        <% }) %>
      <% } else { %>
        <div class="session-box">No past sessions found.</div>
      <% } %>
    </div>
  </div>

  <!-- Shifts -->
  <div class="column">
    <h3>Shifts</h3>
    <div class="box"><strong>Attended:</strong> <%= shifts.attended %></div>
    <div class="box"><strong>Hosted:</strong> <%= shifts.hosted %></div>

    <% if (shifts.coHosted && shifts.coHosted.length > 0) { %>
      <% shifts.coHosted.forEach(s => { %>
        <div class="box"><strong>Co-Hosted:</strong> <%= s.name %> with <%= s.host %></div>
      <% }) %>
    <% } %>
  </div>

</div>
</body>
</html>
